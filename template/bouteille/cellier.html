{% extends "bouteille/base.html" %}

{% block main %}


<section class="section">

  {% if message %}

    {% if message == 'ajouter' %}
    <div id="alert-5" class="mt-5 md:w-80 flex p-4 border-t-4 border-black bg-green-50 " role="alert">
      <svg class="flex-shrink-0 w-5 h-5 text-gray-800 " fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
      <div class="ml-3 text-sm font-medium text-gray-800 ">
        Ajout réussi ! 
      </div>
      <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-green-50  text-gray-500 rounded-lg focus:ring-2 focus:ring-gray-400 p-1.5 hover:bg-gray-200 inline-flex h-8 w-8  " data-dismiss-target="#alert-border-5" aria-label="Close">
        <span class="sr-only">Dismiss</span>
        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
      </button>
    </div>
    {% endif %}

    {% if message == 'modifier' %}
    <div id="alert-5" class="mt-5 md:w-80 flex p-4 border-t-4 border-black bg-green-50 " role="alert">
      <svg class="flex-shrink-0 w-5 h-5 text-gray-800 " fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
      <div class="ml-3 text-sm font-medium text-gray-800 ">
        Modification réussi !
      </div>
      <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-green-50 text-gray-500 rounded-lg focus:ring-2 focus:ring-gray-400 p-1.5 hover:bg-gray-200 inline-flex h-8 w-8 " 
      data-dismiss-target="#alert-border-5" aria-label="Close">
        <span class="sr-only">Dismiss</span>
        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
      </button>
    </div>
    {% endif %}

    {% if message == 'supprimer' %}
    <div id="alert-5" class="mt-5 md:w-80 flex p-4 border-t-4 border-black bg-green-50 " role="alert">
      <svg class="flex-shrink-0 w-5 h-5 text-gray-800 " fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
      <div class="ml-3 text-sm font-medium text-gray-800 ">
        Suppression réussi !
      </div>
      <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-green-50 text-gray-500 rounded-lg focus:ring-2 focus:ring-gray-400 p-1.5 hover:bg-gray-200 inline-flex h-8 w-8 " 
      data-dismiss-target="#alert-border-5" aria-label="Close">
        <span class="sr-only">Dismiss</span>
        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
      </button>
    </div>
    {% endif %}


  {% endif %}
  <h1 class="text-2xl md:text-4xl font-bold pl-5 md:pl-0  mt-5 md:mt-7">Mon Cellier</h1>
</section>


<section id="app-4" class="flex flex-wrap mt-8 section">
{% for bouteille in bouteilles %}
<article class="w-full md:w-1/2 rounded-xl border-2 border-gray-100 bg-white flex items-center p-6"
   data-js-bouteille
  data-js-id="{{bouteille.bdc_id}}"
  @click="">

  <a class="block shrink-0" href="/bouteille/detail/{{bouteille.bdc_id}}">
    <img
      alt="Speaker"
      src="{{bouteille.bout_image}}"
      class="h-18 w-14 rounded-lg object-cover"
    />
  </a>

  <div class="ml-4">
    <h3 class="font-medium text-xs md:text-sm">
      <a href="/bouteille/detail/{{bouteille.bdc_id}}" class="hover:underline">
        {{bouteille.bout_nom}}
      </a>
    </h3>

    <p class="text-xs text-gray-700 line-clamp-2">
      {{bouteille.bout_description}}
    </p>

    <div class="mt-2 flex items-center gap-2">
      <div class="flex items-center text-gray-500">
       {#  <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"
          />
        </svg> #}
        <p class="ml-1 text-xs"> <span data-js-quantite>{{bouteille.bdc_quantite}}</span>  bouteilles</p>
      </div>

      <span class="block" aria-hidden="true">&middot;</span>

      <p class="block text-xs text-gray-500">
      <span class="cursor-pointer" data-js-ajouter>Ajouter</span>  
        <span
        class="cursor-pointer font-medium underline hover:text-gray-700" data-js-boire> Boire </span>
      </p>
    </div>
  </div>
</article>

{% endfor %}

</section>


{# message pour bouteilles vides #}
{% if bouteilles is empty %}
<section
class="overflow-hidden sm:grid sm:grid-cols-2 sm:items-center section"
>
<div class="p-8 md:p-12 lg:px-16 lg:py-24">
  <div class="mx-auto max-w-xl text-center sm:text-left">
    <h2 class="text-2xl font-bold text-gray-900 md:text-3xl">
      Bienvenue sur Vino, <br> Ajouter votre première bouteille.
    </h2>

    <p class="hidden text-gray-500 md:mt-4 md:block">
      Anecdote: Dans le décor spectaculaire du lac de Garde, quelques appellations sont à l’origine de vins authentiques et originaux. C’est ici que naissent certains des vins les plus fameux d’Italie, comme le précieux amarone. Découvrez cette magnifique région en suivant les pas de la famille Zenato.
    </p>

    <div class="mt-4 md:mt-8">
      <a
        href="/bouteille/nouveau"
        class="inline-block rounded bg-emerald-600 px-12 py-3 text-sm font-medium text-white transition hover:bg-emerald-700 focus:outline-none focus:ring focus:ring-yellow-400"
      >
        Commencer
      </a>
    </div>
  </div>
</div>

<img
  alt="Violin"
  src="/public/img/drizzle_bg_2.jpg"
  class=" hidden sm:block mt-9 sm:mt-0 h-full w-full object-cover sm:h-[calc(100%_-_2rem)] sm:self-end sm:rounded-tl-[30px] md:h-[calc(100%_-_4rem)] md:rounded-tl-[60px]"
/>
</section>
{% endif %}
  <style>
    @media (min-width: 800px) {
      .section {
        max-width: clamp(0px, 80vw, 1200px);
        margin-left: auto;
        margin-right: auto;
      }
    }

  </style>
  <script src="/public/js/Bouteille.js"></script>
  <script src="/public/js/message.js"></script>
  <script src="/public/js/main.js"></script>
{% endblock main %}
